var win=Titanium.UI.currentWindow;win.orientationModes=[Titanium.UI.PORTRAIT];var id=win.id,db=Titanium.Database.open("products.db"),sql=db.execute("SELECT * FROM products WHERE id ="+id),productName=sql.fieldByName("name"),productNotes=sql.fieldByName("note"),productBrand=sql.fieldByName("brand"),productImage=sql.fieldByName("image");db.close();var nameB=Ti.UI.createTextField({borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,color:"black",top:10,left:10,width:"95%",height:50,editable:!0,hintText:"Product Name",borderColor:"black",borderWidth:2,value:productName}),brandB=Ti.UI.createTextField({borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,color:"black",top:70,left:10,width:"95%",height:50,editable:!0,hintText:"Product Brand (Optional)",borderColor:"black",borderWidth:2,value:productBrand}),noteB=Ti.UI.createTextArea({borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,color:"black",top:130,left:10,width:"95%",height:100,editable:!0,hintText:"Notes  (Optional)",borderColor:"black",borderWidth:2,value:productNotes}),myImage=Ti.UI.createImageView({height:150,bottom:75,image:productImage}),saveButton=Titanium.UI.createButton({title:"Save Item",right:10,bottom:5,width:150,height:50,backgroundColor:"green"});saveButton.addEventListener("click",function(){var e=Titanium.Database.open("products.db");e.execute("UPDATE products SET name=?, note=?, brand=? WHERE id=?",nameB.value.toString(),noteB.value.toString(),brandB.value.toString(),id),e.close();var t=Ti.UI.createNotification({message:""+nameB.value.toString()+" updated"});t.duration=Ti.UI.NOTIFICATION_DURATION_LONG,t.show(),Titanium.API.info("You clicked the add button"),win.close()});var cancelButton=Titanium.UI.createButton({title:"Cancel",left:10,bottom:5,width:150,height:50,backgroundColor:"red"});cancelButton.addEventListener("click",function(){win.close(),Titanium.API.info("You clicked the cancel button")}),win.add(myImage),win.add(nameB),win.add(brandB),win.add(noteB),win.add(saveButton),win.add(cancelButton),win.addEventListener("open",function(){var e=win.activity.actionBar;e&&(win.getActivity().invalidateOptionsMenu(),e.setDisplayHomeAsUp(!0),e.onHomeIconItemSelected=function(){win.close()})});