function StartUp(){function e(){for(var e=Titanium.Database.open("products.db"),t=e.execute("SELECT * FROM products WHERE cart = 1  GROUP BY name"),n=[];t.isValidRow();){var o=t.fieldByName("name"),r=t.fieldByName("id"),c=t.fieldByName("image"),d=Ti.UI.createTableViewRow({title:o,hasChild:!0,id:r,url:"detail.js",height:"auto"}),s=Ti.UI.createLabel({color:"black",font:{fontFamily:"Arial",fontWeight:"normal"},text:o,left:80,top:25});d.add(s);var l=Ti.UI.createImageView({image:c,left:2,height:70});d.add(l),n.push(d),t.next()}a.setData(n),i.add(a),e.close()}function t(e){if(e.rowData.url){var t=Titanium.UI.createWindow({title:e.rowData.title,id:e.rowData.id,url:e.rowData.url,backgroundColor:"white"});t.open()}}var i=Titanium.UI.createWindow({title:"Shopping List",backgroundColor:"white"});i.orientationModes=[Titanium.UI.PORTRAIT],Scanner=require("scanner2"),History=require("history");var a=Titanium.UI.createTableView({editable:!0});a.addEventListener("click",t),a.addEventListener("longpress",function(i){if(i.rowData.url){var n=Titanium.Database.open("products.db");n.execute("UPDATE products SET cart=? WHERE id=?",0,i.rowData.id),n.close();var o=Ti.UI.createNotification({message:"Item removed from Shopping List"});o.duration=Ti.UI.NOTIFICATION_DURATION_SHORT,o.show(),e(),a.removeEventListener("click",t),setTimeout(function(){a.addEventListener("click",t)},1e3)}}),i.addEventListener("open",function(){var t,a,n,o,r,c,d;t=i.activity.actionBar,t&&(t.setTitle("Shopping List"),t.setDisplayHomeAsUp(!1),d=i.activity,d.onCreateOptionsMenu=function(t){a=t.menu,n=a.add({title:"Refresh",icon:"images/refresh57white.png",showAsAction:Ti.Android.SHOW_AS_ACTION_IF_ROOM}),n.addEventListener("click",function(){e();var t=Ti.UI.createNotification({message:"Shopping List Refreshed"});t.duration=Ti.UI.NOTIFICATION_DURATION_SHORT,t.show()}),o=a.add({title:"History",icon:"images/history6.png",showAsAction:Ti.Android.SHOW_AS_ACTION_IF_ROOM}),o.addEventListener("click",function(){History.HistoryList()}),r=a.add({title:"Scanner",icon:"images/supermarket20.png",showAsAction:Ti.Android.SHOW_AS_ACTION_IF_ROOM}),r.addEventListener("click",function(){Scanner.StartTheScanner()}),c=a.add({title:"Clear Shopping List",icon:"images/delete81red.png",showAsAction:Ti.Android.SHOW_AS_ACTION_NEVER}),c.addEventListener("click",function(){var t=Ti.UI.createAlertDialog({cancel:1,buttonNames:["Confirm","Cancel"],message:"Are you sure you want to clear all items?",title:"Delete All",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER});t.addEventListener("click",function(t){if(t.index===t.source.cancel&&Ti.API.info("The cancel button was clicked"),0===t.index){var i=Titanium.Database.open("products.db");i.execute("UPDATE products SET cart=? WHERE cart=?",0,1),i.close(),e();var a=Ti.UI.createNotification({message:"Shopping List cleared"});a.duration=Ti.UI.NOTIFICATION_DURATION_LONG,a.show()}}),t.show()})},t.onHomeIconItemSelected=function(){var e=Ti.UI.createAlertDialog({message:"The app was created by MikeyGuru",ok:"Okay",title:"About"});e.show()}),e()}),i.addEventListener("focus",e),i.open()}exports.StartUp=StartUp;