function detail(){function e(){var e=Ti.Android.createIntent({action:Ti.Android.ACTION_SEND,type:"text/plain"});e.putExtra(Ti.Android.EXTRA_TEXT,""+o+"\n"+r+"\n"+c),e.addCategory(Ti.Android.CATEGORY_DEFAULT);var t=Ti.Android.createIntentChooser(e,"Send Message");Ti.Android.currentActivity.startActivity(t)}var t=Titanium.UI.currentWindow;t.orientationModes=[Titanium.UI.PORTRAIT];var i=t.id,a=Titanium.Database.open("products.db"),n=a.execute("SELECT * FROM products WHERE id ="+i),o=n.fieldByName("name"),d=n.fieldByName("barcode"),c=n.fieldByName("note"),r=n.fieldByName("brand"),s=n.fieldByName("image"),l=(n.fieldByName("rating"),n.fieldByName("cart")),T=n.fieldByName("date");a.close();var u=l?"Yep":"Nope",A=Titanium.UI.createLabel({color:"black",text:o,top:10,left:10,height:"auto",width:"auto"}),m=Titanium.UI.createLabel({color:"black",text:"Notes: "+c,top:200,height:"auto",width:"auto",left:10}),p=Titanium.UI.createLabel({color:"black",text:"Date scanned: "+T,top:150,height:"auto",width:"auto",left:10}),I=Titanium.UI.createLabel({color:"black",text:"UPC: "+d,top:120,height:"auto",width:"auto",left:10}),h=Titanium.UI.createLabel({color:"black",text:"Brand: "+r,top:50,height:"auto",width:"auto",left:10}),E=Titanium.UI.createLabel({color:"black",text:"In Shopping Cart: "+u,top:80,height:"auto",width:"auto",left:10}),g=Ti.UI.createImageView({height:200,image:s,bottom:10});g.defaultImage="images/NoImage.png",t.add(A),t.add(h),t.add(E),c&&t.add(m),t.add(p),t.add(I),t.add(g),t.addEventListener("open",function(){var a,n,o,d,c,r,s;a=t.activity.actionBar,a&&(t.getActivity().invalidateOptionsMenu(),a.setDisplayHomeAsUp(!0),a.onHomeIconItemSelected=function(){t.close()},s=t.activity,s.onCreateOptionsMenu=function(a){0===l&&(n=a.menu,r=n.add({title:"Share Item",icon:"images/share21.png",showAsAction:Ti.Android.SHOW_AS_ACTION_ALWAYS}),r.addEventListener("click",e),d=n.add({title:"Delete",icon:"images/delete81red.png",showAsAction:Ti.Android.SHOW_AS_ACTION_IF_ROOM}),d.addEventListener("click",function(){var e=Ti.UI.createAlertDialog({cancel:1,buttonNames:["Confirm","Cancel"],message:"Delete this item from everywhere?",title:"Delete",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER});e.addEventListener("click",function(e){if(1===e.index&&Ti.API.info("The cancel button was clicked"),0===e.index){var a=Titanium.Database.open("products.db");a.execute("DELETE FROM products WHERE id =?",i),a.close(),Ti.API.info("The confirm button was clicked"),t.close()}}),e.show()}),c=n.add({title:"Add to Shopping List",icon:"images/shopping100white.png",showAsAction:Ti.Android.SHOW_AS_ACTION_IF_ROOM}),c.addEventListener("click",function(){var e=Titanium.Database.open("products.db");e.execute("UPDATE products SET cart=? WHERE id=?",1,i),e.close();var t=Ti.UI.createNotification({message:"Item added to Shopping List"});t.duration=Ti.UI.NOTIFICATION_DURATION_LONG,t.show()}),o=n.add({title:"Edit",icon:"images/edit26white.png",showAsAction:Ti.Android.SHOW_AS_ACTION_IF_ROOM}),o.addEventListener("click",function(){})),1===l&&(n=a.menu,r=n.add({title:"Share Item",icon:"images/share21.png",showAsAction:Ti.Android.SHOW_AS_ACTION_ALWAYS}),r.addEventListener("click",e),d=n.add({title:"Delete",icon:"images/delete81red.png",showAsAction:Ti.Android.SHOW_AS_ACTION_NEVER}),d.addEventListener("click",function(){var e=Ti.UI.createAlertDialog({cancel:1,buttonNames:["Confirm","Cancel"],message:"Delete this item from everywhere?",title:"Delete",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER});e.addEventListener("click",function(e){if(1===e.index&&Ti.API.info("The cancel button was clicked"),0===e.index){var a=Titanium.Database.open("products.db");a.execute("DELETE FROM products WHERE id =?",i),a.close(),Ti.API.info("The confirm button was clicked"),t.close()}}),e.show()}),c=n.add({title:"Remove from Shopping List",icon:"images/shopping100red.png",showAsAction:Ti.Android.SHOW_AS_ACTION_IF_ROOM}),c.addEventListener("click",function(){var e=Titanium.Database.open("products.db");e.execute("UPDATE products SET cart=? WHERE id=?",0,i),e.close();var a=Ti.UI.createNotification({message:"Item removed from Shopping List"});a.duration=Ti.UI.NOTIFICATION_DURATION_LONG,a.show(),t.close()}),r.addEventListener("click",e))})})}detail();