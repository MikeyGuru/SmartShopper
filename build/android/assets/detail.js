function detail(){function t(){var t=Ti.Android.createIntent({action:Ti.Android.ACTION_SEND,type:"text/plain"});t.putExtra(Ti.Android.EXTRA_TEXT,""+n+"\n"+r+"\n"+c),t.addCategory(Ti.Android.CATEGORY_DEFAULT);var e=Ti.Android.createIntentChooser(t,"Send Message");Ti.Android.currentActivity.startActivity(e)}var e=Titanium.UI.currentWindow;e.orientationModes=[Titanium.UI.PORTRAIT];var i=e.id,a=Titanium.Database.open("products.db"),o=a.execute("SELECT * FROM products WHERE id ="+i),n=o.fieldByName("name"),d=o.fieldByName("barcode"),c=o.fieldByName("note"),r=o.fieldByName("brand"),s=o.fieldByName("image"),l=(o.fieldByName("rating"),o.fieldByName("cart")),T=o.fieldByName("date");a.close();var I=l?"Yep":"Nope",A=Titanium.UI.createLabel({color:"black",text:n,top:3,left:10,height:55,width:"auto",ellipsize:!0}),h=Titanium.UI.createLabel({color:"black",text:"Notes: "+c,top:180,height:"auto",width:"auto",left:10}),u=Titanium.UI.createLabel({color:"black",text:"Date added: "+T,top:150,height:"auto",width:"auto",left:10}),p=Titanium.UI.createLabel({color:"black",text:"UPC: "+d,top:120,height:25,width:"auto",left:10}),m=Titanium.UI.createLabel({color:"black",text:"Brand: "+r,top:60,height:25,width:"auto",left:10}),g=Titanium.UI.createLabel({color:"black",text:"In Shopping Cart: "+I,top:90,height:25,width:"auto",left:10}),f=Ti.UI.createImageView({height:250,image:s,bottom:10});f.defaultImage="images/NoImage.png",e.add(A),r&&e.add(m),e.add(g),c&&e.add(h),e.add(u),d&&e.add(p),e.add(f),e.addEventListener("open",function(){var a,o,n,d,c,r,s;a=e.activity.actionBar,a&&(e.getActivity().invalidateOptionsMenu(),a.setDisplayHomeAsUp(!0),a.onHomeIconItemSelected=function(){e.close()},s=e.activity,s.onCreateOptionsMenu=function(a){0===l&&(o=a.menu,r=o.add({title:"Share Item",icon:"images/share21.png",showAsAction:Ti.Android.SHOW_AS_ACTION_ALWAYS}),r.addEventListener("click",t),d=o.add({title:"Delete",icon:"images/delete81red.png",showAsAction:Ti.Android.SHOW_AS_ACTION_IF_ROOM}),d.addEventListener("click",function(){var t=Ti.UI.createAlertDialog({cancel:1,buttonNames:["Confirm","Cancel"],message:"Delete this item from everywhere?",title:"Delete",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER});t.addEventListener("click",function(t){if(1===t.index&&Ti.API.info("The cancel button was clicked"),0===t.index){var a=Titanium.Database.open("products.db");a.execute("DELETE FROM products WHERE id =?",i),a.close(),Ti.API.info("The confirm button was clicked"),e.close()}}),t.show()}),c=o.add({title:"Add to Shopping List",icon:"images/shopping100white.png",showAsAction:Ti.Android.SHOW_AS_ACTION_IF_ROOM}),c.addEventListener("click",function(){var t=Titanium.Database.open("products.db");t.execute("UPDATE products SET cart=? WHERE id=?",1,i),t.close();var e=Ti.UI.createNotification({message:"Item added to Shopping List"});e.duration=Ti.UI.NOTIFICATION_DURATION_LONG,e.show()}),n=o.add({title:"Edit",icon:"images/edit26white.png",showAsAction:Ti.Android.SHOW_AS_ACTION_IF_ROOM}),n.addEventListener("click",function(){})),1===l&&(o=a.menu,r=o.add({title:"Share Item",icon:"images/share21.png",showAsAction:Ti.Android.SHOW_AS_ACTION_ALWAYS}),r.addEventListener("click",t),d=o.add({title:"Delete",icon:"images/delete81red.png",showAsAction:Ti.Android.SHOW_AS_ACTION_NEVER}),d.addEventListener("click",function(){var t=Ti.UI.createAlertDialog({cancel:1,buttonNames:["Confirm","Cancel"],message:"Delete this item from everywhere?",title:"Delete",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER});t.addEventListener("click",function(t){if(1===t.index&&Ti.API.info("The cancel button was clicked"),0===t.index){var a=Titanium.Database.open("products.db");a.execute("DELETE FROM products WHERE id =?",i),a.close(),Ti.API.info("The confirm button was clicked"),e.close()}}),t.show()}),c=o.add({title:"Remove from Shopping List",icon:"images/shopping100red.png",showAsAction:Ti.Android.SHOW_AS_ACTION_IF_ROOM}),c.addEventListener("click",function(){var t=Titanium.Database.open("products.db");t.execute("UPDATE products SET cart=? WHERE id=?",0,i),t.close();var a=Ti.UI.createNotification({message:"Item removed from Shopping List"});a.duration=Ti.UI.NOTIFICATION_DURATION_LONG,a.show(),e.close()}),r.addEventListener("click",t))})})}detail();